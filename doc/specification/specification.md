# 仕様書

## 環境構築

1. rails_apiプロジェクトの作成
1. annotate gemの導入
1. rubcopの導入
1. yardの導入

## API Format
1. API設計
1. APIのベースを作成
1. APIのテンプレートエンジンの導入

## 認証（バックエンド）
1. 新規ユーザー作成
1. メールアドレス認証
1. ユーザー認証
1. アクセストークンの付与
1. 認証必須ページへのアクセス制限
1. ユーザーログアウト（アクセストークンの削除、無効化）
1. リフレッシュトークンを使用してアクセストークンの再取得
1. ユーザーのパスワード変更
1. ユーザーの削除
1. Googleアカウント認証
1. Twitterアカウント認証
1. Facebook認証
1. アプリのclient id の作成
1. アプリのredirect url設定
1. アプリの削除

## エラー処理
1. 400番台のエラー処理方法決定
1. 500番台のエラー処理方法決定
1. エラー処理の実装
  * 想定外の500番台のエラーの処理
  * 想定する500番台のエラー処理
  * 想定する400番台のエラー処理

## ログ
1. 想定外エラーのログ
1. アクセスログ
1. アプリケーションログ（Debug, ...., Error)

## フロントプロジェクト作成
1. reactプロジェクトの作成
1. cssテンプレートの導入

## 認証（フロント）
1. ログイン画面表示作成（htmlのみ)
  * ID, PASSの入力ボックス
  * ログインボタン
  * 新規登録リンク
1. 新規登録画面作成
  * 新規ユーザー登録に必要なHTML
  * 登録ボタンを押下後のAPI処理
  * エラー表示処理
1. ログイン画面処理作成
  * ログインボタンを押下後のAPI処理
  * エラー表示処理
1. ログイン画面 OAuth処理
  * Googleログイン
  * Twitterログイン
  * Facebookログイン
1. 新規登録画面 OAuth処理
  * Google
  * Twitter
  * Facebook
1. 認証後のダミーページ作成
  * 有効なアクセストークンを所持していない場合表示不可
  * ログアウトボタンのみ表示
1. ログアウトボタン押下後のAPI処理

## サーバー構築
1. Unicorn + nginx構築
1. nginxのログ管理方針決定
1. unicornのログ管理方針決定
1. logrotateによるログの設定
1. fluentd利用してのログ集約
1. fluentd利用してのS3へのログの定期送信

